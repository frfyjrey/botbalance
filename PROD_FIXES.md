# –ü—Ä–æ–¥–∞–∫—à–µ–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è BotBalance

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—É–∂–µ –≤–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–¥)

### 1. Redis CONNECTION –ø—Ä–æ–±–ª–µ–º–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: `TypeError: AbstractConnection.init() got an unexpected keyword argument 'CLIENT_CLASS'`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è `CLIENT_CLASS` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Redis –≤ `prod.py`

```python
# –ë–´–õ–û (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ):
"OPTIONS": {
    "CLIENT_CLASS": "django_redis.client.DefaultClient",  # ‚Üê –≠—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É
    "CONNECTION_POOL_KWARGS": {...}
}

# –°–¢–ê–õ–û (—Ä–∞–±–æ—Ç–∞–µ—Ç):
"OPTIONS": {
    "CONNECTION_POOL_KWARGS": {...}
}
```

### 2. Django –∞–¥–º–∏–Ω–∫–∞ –±–µ–∑ —Å—Ç–∞—Ç–∏–∫–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: 500 –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∞–¥–º–∏–Ω–∫—É, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç CSS/JS  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `whitenoise>=6.6.0` –≤ `pyproject.toml`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `WhiteNoiseMiddleware` –≤ `prod.py`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω `STATICFILES_STORAGE` –¥–ª—è —Å–∂–∞—Ç–∏—è —Å—Ç–∞—Ç–∏–∫–∏
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

### 3. CORS –ø—É—Å—Ç—ã–µ origins
**–ü—Ä–æ–±–ª–µ–º–∞**: `corsheaders.E013: Origin '' in CORS_ALLOWED_ORIGINS`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```python
# –¢–µ–ø–µ—Ä—å –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
if os.getenv("CORS_ALLOWED_ORIGINS"):
    CORS_ALLOWED_ORIGINS.extend(
        origin.strip() for origin in os.getenv("CORS_ALLOWED_ORIGINS", "").split(",") 
        if origin.strip()
    )
```

## üöÄ –ö–∞–∫ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
pip install whitenoise>=6.6.0
```

### 2. –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏–∫—É
```bash
python manage.py collectstatic --noinput
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Celery workers (—á—Ç–æ–±—ã –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—å –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Redis)

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
- –ê–¥–º–∏–Ω–∫–∞: https://api.botbalance.me/nukoadmin/ (–¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Å—Ç–∏–ª–∏)
- API: https://api.botbalance.me/api/health/ (–¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫ Redis)

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Django –∞–¥–º–∏–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Å–æ —Å—Ç–∏–ª—è–º–∏  
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —Å–µ—Ä–≤—è—Ç—Å—è —á–µ—Ä–µ–∑ Whitenoise
- ‚úÖ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (62 backend + 6 frontend)

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `backend/static/` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è CORS –∏ ALLOWED_HOSTS
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –ø—É—Ç–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è pathlib)
